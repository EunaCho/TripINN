<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="admin">

	<!-- Qna리스트, 페이징을 위해 수정됨 -->
   <select id="qnaBoardList" parameterType="hashmap" resultType="hashmap">
   <!-- MyBatis의 기능으로 쿼리의 일부분을 만들어놓고, 그것을 여러곳에서 가져다 사용할 수 있도록 함. 페이징 쿼리에서 항상 똑같이 사용되는 부분-->
    <include refid="common.pagingPre"/> 
    <![CDATA[
        SELECT
            ROW_NUMBER() OVER (ORDER BY QNA_IDX DESC) RNUM,
            QNA_IDX,
            QNA_TITLE,
            QNA_READCOUNT,
            QNA_REGDATE
        FROM
            QNA_BOARD
        ORDER BY QNA_IDX DESC
    ]]>
    <include refid="common.pagingPost"/> 
   </select>   
   
   
   
   <insert id="adminQnaInsertPro" parameterType="hashmap">
    <![CDATA[
        INSERT INTO QNA_BOARD
        (
            QNA_IDX,
            QNA_TITLE,
            QNA_CONTENT,
            QNA_PWD,
            QNA_REGDATE,
            QNA_READCOUNT,
            MEMBER_IDX
        )
        VALUES
        (
           QNA_IDX_SEQ.NEXTVAL, 
            #{QNA_TITLE}, 
            #{QNA_CONTENT}, 
            '11', 
            SYSDATE, 
            0, 
            1
        )
    ]]>
   </insert>
   
   
   <!--조회수 증가  -->
   <update id="updateQnaReadCount" parameterType="hashmap">
    <![CDATA[
        UPDATE QNA_BOARD 
        SET
            QNA_READCOUNT = NVL(QNA_READCOUNT, 0) + 1
        WHERE
            QNA_IDX = #{QNA_IDX}    
    ]]>
   </update>
 
    <!--QNA 상세보기 -->
   <select id="adminQnaSelectDetail" parameterType="hashmap" resultType="hashmap">
    <![CDATA[
        SELECT
            QNA_IDX,
            QNA_TITLE,
            QNA_CONTENT,
            QNA_PWD,
            QNA_REGDATE,
            QNA_READCOUNT
        FROM
            QNA_BOARD
        WHERE
            QNA_IDX = #{QNA_IDX}        
       ]]>
   </select>
   
   <!-- QNA 수정 -->
   <update id="adminQnaUpdatePro" parameterType="hashmap">
    <![CDATA[
    
        UPDATE QNA_BOARD
        SET
           QNA_TITLE = #{QNA_TITLE},
           QNA_CONTENT = #{QNA_CONTENT}
        WHERE
           QNA_IDX = #{QNA_IDX}
    ]]>
   </update>

   <!-- QNA 삭제하기 -->
   <update id="adminQnaDelete" parameterType="hashmap">
    <![CDATA[
        DELETE FROM QNA_BOARD
        WHERE QNA_IDX = #{QNA_IDX}
    ]]>
   </update>


	<!-- 멤버리스트 -->
	<select id="selectMemberList" parameterType="hashmap" resultType="hashmap">
		
			SELECT
            MEMBER_IDX,
            MEMBER_EMAIL,
            MEMBER_NAME,
            MEMBER_PWD,
            MEMBER_BIRTH,
            MEMBER_PHONE,
            MEMBER_SEX,
            MEMBER_ADDR,
            MEMBER_JOINDATE,
            MEMBER_LEVEL
            FROM
            MEMBER
            ORDER BY MEMBER_IDX DESC
	
	</select>
	
	

     
<select id="selectMemberView" parameterType="hashmap" resultType="hashmap">
    
        SELECT
            MEMBER_IDX,
            MEMBER_EMAIL,
            MEMBER_JOINDATE,
            MEMBER_LEVEL,
            MEMBER_NAME,
            MEMBER_PWD,
            MEMBER_BIRTH,
            MEMBER_PHONE,
            MEMBER_SEX,
            MEMBER_ADDR,
            MEMBER_IMAGE
            FROM 
            MEMBER
            WHERE MEMBER_IDX = #{MEMBER_IDX}        
   
</select>

<update id="updateMemberModify" parameterType="hashmap">
   
        UPDATE MEMBER SET
            MEMBER_ADDR = #{MEMBER_ADDR},
            MEMBER_PHONE = #{MEMBER_PHONE},
            MEMBER_EMAIL = #{MEMBER_EMAIL},
            MEMBER_PWD = #{MEMBER_PWD},
            MEMBER_LEVEL = #{MEMBER_LEVEL}
            
            WHERE MEMBER_IDX = #{MEMBER_IDX}    
 
</update>

<delete id="deleteList" parameterType="hashmap">


        DELETE
        FROM MEMBER
        
        WHERE MEMBER_IDX = #{MEMBER_IDX}  


</delete>


	
	
	<!-- faq 리스트 -->
    <select id="faqBoardList" parameterType="hashmap" resultType="hashmap">
        <![CDATA[
           SELECT
   			 FAQ_IDX,
   			 FAQ_TITLE,
   			 FAQ_READCOUNT,
  			 FAQ_REGDATE
		FROM
    		FAQ_BOARD
		ORDER BY FAQ_IDX DESC
		
        ]]>
    </select>
    
    <!-- House List -->
    <select id="selectHouseList" parameterType="hashmap" resultType="hashmap">
		
			SELECT
			
            HOUSE_IDX,
            HOUSE_NAME,
            HOUSE_INFO,
            HOUSE_KIND,
            HOUSE_IMAGE,
            HOUSE_ZIPCODE,
            HOUSE_ADDR1,
            HOUSE_ADDR2,
            HOUSE_ADDR3,
            HOUSE_PERSONS,
            HOUSE_TOTAL_PRICE,
            HOUSE_PRICE,
            HOUSE_PERSON_PRICE
  
          FROM
            HOUSE
            
          ORDER BY HOUSE_IDX DESC
	
	</select>
	
	<select id="selectHouseReportList" parameterType="hashmap" resultType="hashmap">
		
			SELECT
			REPORT_IDX,
			REPORT_TITLE,
			REPORT_CONTENT,
			REPORT_REGDATE

          FROM
            REPORT_BOARD
            
          ORDER BY REPORT_IDX DESC
	
	</select>
    
</mapper>